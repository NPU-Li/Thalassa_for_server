
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>

<HEAD>
   <TITLE>kplfrm</TITLE>
</HEAD>

<BODY style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<A name="TOP"></A>

<table style="text-align: left; margin-left: auto; margin-right: auto; width: 800px;"
 border="0" cellpadding="5" cellspacing="2">
  <tbody>
    <tr><td>
<div align="center">
Index of Functions: 
<A HREF="index.html#A">A</A>&nbsp;
<A HREF="index.html#B">B</A>&nbsp;
<A HREF="index.html#C">C</A>&nbsp;
<A HREF="index.html#D">D</A>&nbsp;
<A HREF="index.html#E">E</A>&nbsp;
<A HREF="index.html#F">F</A>&nbsp;
<A HREF="index.html#G">G</A>&nbsp;
<A HREF="index.html#H">H</A>&nbsp;
<A HREF="index.html#I">I</A>&nbsp;
<A HREF="index.html#J">J</A>&nbsp;
<A HREF="index.html#K">K</A>&nbsp;
<A HREF="index.html#L">L</A>&nbsp;
<A HREF="index.html#M">M</A>&nbsp;
<A HREF="index.html#N">N</A>&nbsp;
<A HREF="index.html#O">O</A>&nbsp;
<A HREF="index.html#P">P</A>&nbsp;
<A HREF="index.html#Q">Q</A>&nbsp;
<A HREF="index.html#R">R</A>&nbsp;
<A HREF="index.html#S">S</A>&nbsp;
<A HREF="index.html#T">T</A>&nbsp;
<A HREF="index.html#U">U</A>&nbsp;
<A HREF="index.html#V">V</A>&nbsp;
<A HREF="index.html#W">W</A>&nbsp;
<A HREF="index.html#X">X</A>&nbsp;
</div>
</td></tr>

    <tr>
      <td style="background-color: rgb(153, 153, 153); vertical-align: middle; text-align: center;">
      <div align="right"> 
      <small><small><a href="index.html">Index Page</a></small></small>
      </div>
      <b>kplfrm</b></td>
    </tr>
    

    <tr>
      <td style="vertical-align: top;">

       <br>
       <div align="left"><b>Table of contents</b></div>
       <table style="text-align: left; width: 60%; margin-left: auto; margin-right: auto;"
       border="0" cellspacing="2" cellpadding="2">
        <tbody>
          <tr>
            <td style="width: 33%; text-align: center;">
              <a href="#Procedure">Procedure<br></a>
              <a href="#Abstract">Abstract<br></a>
              <a href="#Required_Reading">Required_Reading<br></a>
              <a href="#Keywords">Keywords<br></a>
              <a href="#Declarations">Declarations<br></a>
              <a href="#Brief_I/O">Brief_I/O<br></a>

              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">              <a href="#Detailed_Input">Detailed_Input<br></a>
              <a href="#Detailed_Output">Detailed_Output<br></a>
              <a href="#Parameters">Parameters<br></a>
              <a href="#Exceptions">Exceptions<br></a>
              <a href="#Files">Files<br></a>
              <a href="#Particulars">Particulars<br></a>

              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">              <big><b><a href="#Examples">Examples<br></a></b></big>
              <a href="#Restrictions">Restrictions<br></a>
              <a href="#Literature_References">Literature_References<br></a>
              <a href="#Author_and_Institution">Author_and_Institution<br></a>
              <a href="#Version">Version<br></a>
            </td>
          </tr>
        </tbody>
</table>
<hr>

<h4><a name="Procedure">Procedure</a></h4>
<PRE>
     KPLFRM ( Kernel pool frame IDs )

     SUBROUTINE KPLFRM ( FRMCLS, IDSET )
</PRE>
<h4><a name="Abstract">Abstract</a></h4>
<PRE>
     Return a SPICE set containing the frame IDs of all reference
     frames of a given class having specifications in the kernel pool.
</PRE>
<h4><a name="Required_Reading">Required_Reading</a></h4>
<PRE>
     <a href="../req/cells.html">CELLS</a>
     <a href="../req/frames.html">FRAMES</a>
     <a href="../req/kernel.html">KERNEL</a>
     <a href="../req/naif_ids.html">NAIF_IDS</a>
     <a href="../req/sets.html">SETS</a>
</PRE>
<h4><a name="Keywords">Keywords</a></h4>
<PRE>
     FRAME
     SET
     UTILITY
</PRE>
<h4><a name="Declarations">Declarations</a></h4>
<PRE>
     IMPLICIT NONE

     INCLUDE 'frmtyp.inc'
     INCLUDE 'ninert.inc'
     INCLUDE 'nninrt.inc'

     INTEGER               LBCELL
     PARAMETER           ( LBCELL = -5 )

     INTEGER               FRMCLS
     INTEGER               IDSET  ( LBCELL : * )
</PRE>
<h4><a name="Brief_I/O">Brief_I/O</a></h4>
<PRE>
     VARIABLE  I/O  DESCRIPTION
     --------  ---  --------------------------------------------------
     FRMCLS     I   Frame class.
     IDSET      O   Set of ID codes of frames of the specified class.
</PRE>
<h4><a name="Detailed_Input">Detailed_Input</a></h4>
<PRE>
     FRMCLS   is an integer code specifying the frame class or
              classes for which frame ID codes are requested.
              The applicable reference frames are those having
              specifications present in the kernel pool.

              FRMCLS may designate a single class or &quot;all
              classes.&quot;

              The include file frmtyp.inc declares parameters
              identifying frame classes. The supported values
              and corresponding meanings of FRMCLS are

                 Parameter      Value    Meaning
                 =========      =====    =================
                 ALL              -1     All frame classes
                                         specified in the
                                         kernel pool. Class 1
                                         is not included.

                 INERTL            1     Built-in inertial.
                                         No frames will be
                                         returned in the
                                         output set.

                 PCK               2     PCK-based frame

                 CK                3     CK-based frame

                 TK                4     Fixed rotational
                                         offset (&quot;text
                                         kernel&quot;) frame

                 DYN               5     Dynamic frame

                 SWTCH             6     Switch frame
</PRE>
<h4><a name="Detailed_Output">Detailed_Output</a></h4>
<PRE>
     IDSET    is a SPICE set containing the ID codes of all
              reference frames having specifications present in
              the kernel pool and belonging to the specified
              class or classes.

              Note that if FRMCLS is set to INERTL, IDSET
              will be empty on output.
</PRE>
<h4><a name="Parameters">Parameters</a></h4>
<PRE>
     See the INCLUDE file frmtyp.inc.
</PRE>
<h4><a name="Exceptions">Exceptions</a></h4>
<PRE>
     1)  If the input frame class argument is not defined in
         frmtyp.inc, the error SPICE(BADFRAMECLASS) is signaled.

     2)  If the size of IDSET is too small to hold the requested frame
         ID set, the error SPICE(SETTOOSMALL) is signaled.

     3)  Frames of class 1 may not be specified in the kernel pool.
         However, for the convenience of users, this routine does not
         signal an error if the input class is set to INERTL. In this
         case the output set will be empty.

     4)  This routine relies on the presence of just three kernel
         variable assignments for a reference frame in order to
         determine that that reference frame has been specified:

            FRAME_&lt;frame name&gt;       = &lt;ID code&gt;
            FRAME_&lt;ID code&gt;_NAME     = &lt;frame name&gt;

         and either

            FRAME_&lt;ID code&gt;_CLASS    = &lt;class&gt;

         or

            FRAME_&lt;frame name&gt;_CLASS = &lt;class&gt;

         It is possible for the presence of an incomplete frame
         specification to trick this routine into incorrectly
         deciding that a frame has been specified. This routine
         does not attempt to diagnose this problem.
</PRE>
<h4><a name="Files">Files</a></h4>
<PRE>
     Reference frame specifications for frames that are not built in
     are typically established by loading frame kernels.
</PRE>
<h4><a name="Particulars">Particulars</a></h4>
<PRE>
     This routine enables SPICE-based applications to conveniently
     find the frame ID codes of reference frames having specifications
     present in the kernel pool. Such frame specifications are
     introduced into the kernel pool either by loading frame kernels
     or by means of calls to the kernel pool &quot;put&quot; API routines

        <a href="pcpool.html">PCPOOL</a>
        <a href="pdpool.html">PDPOOL</a>
        <a href="pipool.html">PIPOOL</a>

     Given a reference frame's ID code, other attributes of the
     frame can be obtained via calls to the SPICELIB routines

        <a href="frmnam.html">FRMNAM</a> {Return a frame's name}
        <a href="frinfo.html">FRINFO</a> {Return a frame's center, class, and class ID}

     This routine has a counterpart

        <a href="bltfrm.html">BLTFRM</a>

     which fetches the frame IDs of all built-in reference frames.
</PRE>
<h4><a name="Examples">Examples</a></h4>
<PRE>
     The numerical results shown for this example may differ across
     platforms. The results depend on the SPICE kernels used as
     input, the compiler and supporting libraries, and the machine
     specific arithmetic implementation.

     1) Display the IDs and names of all reference frames having
        specifications present in the kernel pool. Group the outputs
        by frame class. Also fetch and display the entire set of IDs
        and names using the parameter ALL.

        Use the meta-kernel shown below to load the required SPICE
        kernels.


           KPL/MK

           File: kplfrm_ex1.tm

           This meta-kernel is intended to support operation of SPICE
           example programs. The kernels shown here should not be
           assumed to contain adequate or correct versions of data
           required by SPICE-based user applications.

           In order for an application to use this meta-kernel, the
           kernels referenced here must be present in the user's
           current working directory.

           The names and contents of the kernels referenced
           by this meta-kernel are as follows:

              File name            Contents
              --------------       --------------------------
              clem_v20.tf          Clementine FK
              moon_060721.tf       Generic Lunar SPICE frames


           \begindata

              KERNELS_TO_LOAD = ( 'clem_v20.tf'
                                  'moon_060721.tf' )
           \begintext

           End of meta-kernel


        Example code begins here.


              PROGRAM KPLFRM_EX1
              IMPLICIT NONE

              INCLUDE 'frmtyp.inc'
        C
        C     SPICELIB functions
        C
              INTEGER               <a href="cardi.html">CARDI</a>
        C
        C     Local parameters
        C
              CHARACTER*(*)         META
              PARAMETER           ( META   = 'kplfrm_ex1.tm' )

              INTEGER               NFRAME
              PARAMETER           ( NFRAME = 1000 )

              INTEGER               LBCELL
              PARAMETER           ( LBCELL = -5 )

              INTEGER               LNSIZE
              PARAMETER           ( LNSIZE = 80 )

              INTEGER               FRNMLN
              PARAMETER           ( FRNMLN = 32 )

        C
        C     Local variables
        C
              CHARACTER*(FRNMLN)    FRNAME
              CHARACTER*(LNSIZE)    OUTLIN

              INTEGER               I
              INTEGER               IDSET ( LBCELL : NFRAME )
              INTEGER               J

        C
        C     Initialize the frame set.
        C
              CALL <a href="ssizei.html">SSIZEI</a> ( NFRAME, IDSET )

        C
        C     Load kernels that contain frame specifications.
        C
              CALL <a href="furnsh.html">FURNSH</a> ( META )

        C
        C     Fetch and display the frames of each class.
        C
              DO I = 1, 7

                 IF ( I .LT. 7 ) THEN
        C
        C           Fetch the frames of class I.
        C
                    CALL <b>KPLFRM</b> ( I, IDSET )

                    OUTLIN = 'Number of frames of class #: #'
                    CALL <a href="repmi.html">REPMI</a> ( OUTLIN, '#', I,            OUTLIN )
                    CALL <a href="repmi.html">REPMI</a> ( OUTLIN, '#', <a href="cardi.html">CARDI</a>(IDSET), OUTLIN )

                 ELSE
        C
        C           Fetch IDs of all frames specified in the kernel
        C           pool.
        C
                    CALL <b>KPLFRM</b> ( ALL, IDSET )

                    OUTLIN = 'Number of frames in the kernel pool: #'
                    CALL <a href="repmi.html">REPMI</a> ( OUTLIN, '#', <a href="cardi.html">CARDI</a>(IDSET), OUTLIN )

                 END IF

                 CALL <a href="tostdo.html">TOSTDO</a> ( ' '    )
                 CALL <a href="tostdo.html">TOSTDO</a> ( OUTLIN )
                 CALL <a href="tostdo.html">TOSTDO</a> ( '   Frame IDs and names' )

                 DO J = 1, <a href="cardi.html">CARDI</a>(IDSET)
                    CALL <a href="frmnam.html">FRMNAM</a> ( IDSET(J), FRNAME )
                    WRITE (*,*) IDSET(J), '  ', FRNAME
                 END DO

              END DO

              END


        When this program was executed on a Mac/Intel/gfortran/64-bit
        platform, the output was:


        Number of frames of class 1: 0
           Frame IDs and names

        Number of frames of class 2: 1
           Frame IDs and names
               31002   MOON_PA_DE403

        Number of frames of class 3: 1
           Frame IDs and names
              -40000   CLEM_SC_BUS

        Number of frames of class 4: 11
           Frame IDs and names
              -40008   CLEM_CPT
              -40007   CLEM_BSTAR
              -40006   CLEM_ASTAR
              -40005   CLEM_LIDAR
              -40004   CLEM_LWIR
              -40003   CLEM_NIR
              -40002   CLEM_UVVIS
              -40001   CLEM_HIRES
               31000   MOON_PA
               31001   MOON_ME
               31003   MOON_ME_DE403

        Number of frames of class 5: 0
           Frame IDs and names

        Number of frames of class 6: 0
           Frame IDs and names

        Number of frames in the kernel pool: 13
           Frame IDs and names
              -40008   CLEM_CPT
              -40007   CLEM_BSTAR
              -40006   CLEM_ASTAR
              -40005   CLEM_LIDAR
              -40004   CLEM_LWIR
              -40003   CLEM_NIR
              -40002   CLEM_UVVIS
              -40001   CLEM_HIRES
              -40000   CLEM_SC_BUS
               31000   MOON_PA
               31001   MOON_ME
               31002   MOON_PA_DE403
               31003   MOON_ME_DE403
</PRE>
<h4><a name="Restrictions">Restrictions</a></h4>
<PRE>
     1)  This routine will work correctly if the kernel pool contains
         no invalid frame specifications. See the description of
         exception 4 above. Users must ensure that no invalid frame
         specifications are introduced into the kernel pool, either by
         loaded kernels or by means of the kernel pool &quot;put&quot; APIs.
</PRE>
<h4><a name="Literature_References">Literature_References</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Author_and_Institution">Author_and_Institution</a></h4>
<PRE>
     N.J. Bachman       (JPL)
     J. Diaz del Rio    (ODC Space)
</PRE>
<h4><a name="Version">Version</a></h4>
<PRE>
    SPICELIB Version 2.0.0, 08-AUG-2021 (JDR) (NJB)

        Updated to account for switch frame class.

        Edited the header to comply with NAIF standard.

        Updated Example's kernels set to use Clementine PDS archived
        data.

    SPICELIB Version 1.1.0, 18-JUN-2015 (NJB)

        Bug fix: previous algorithm failed if the number of frame
        names fetched from the kernel pool on a single call exceeded
        twice the kernel variable buffer size. The count of
        fetched names is now maintained correctly.

    SPICELIB Version 1.0.0, 22-MAY-2012 (NJB)</PRE>
<h4>Link to routine KPLFRM source file <a href='../../../src/spicelib/kplfrm.f'>kplfrm.f</a> </h4>

      </td>
    </tr>
  </tbody>
</table>

   <pre>Fri Dec 31 18:36:29 2021</pre>

</body>
</html>

