
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>

<HEAD>
   <TITLE>dasadc</TITLE>
</HEAD>

<BODY style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<A name="TOP"></A>

<table style="text-align: left; margin-left: auto; margin-right: auto; width: 800px;"
 border="0" cellpadding="5" cellspacing="2">
  <tbody>
    <tr><td>
<div align="center">
Index of Functions: 
<A HREF="index.html#A">A</A>&nbsp;
<A HREF="index.html#B">B</A>&nbsp;
<A HREF="index.html#C">C</A>&nbsp;
<A HREF="index.html#D">D</A>&nbsp;
<A HREF="index.html#E">E</A>&nbsp;
<A HREF="index.html#F">F</A>&nbsp;
<A HREF="index.html#G">G</A>&nbsp;
<A HREF="index.html#H">H</A>&nbsp;
<A HREF="index.html#I">I</A>&nbsp;
<A HREF="index.html#J">J</A>&nbsp;
<A HREF="index.html#K">K</A>&nbsp;
<A HREF="index.html#L">L</A>&nbsp;
<A HREF="index.html#M">M</A>&nbsp;
<A HREF="index.html#N">N</A>&nbsp;
<A HREF="index.html#O">O</A>&nbsp;
<A HREF="index.html#P">P</A>&nbsp;
<A HREF="index.html#Q">Q</A>&nbsp;
<A HREF="index.html#R">R</A>&nbsp;
<A HREF="index.html#S">S</A>&nbsp;
<A HREF="index.html#T">T</A>&nbsp;
<A HREF="index.html#U">U</A>&nbsp;
<A HREF="index.html#V">V</A>&nbsp;
<A HREF="index.html#W">W</A>&nbsp;
<A HREF="index.html#X">X</A>&nbsp;
</div>
</td></tr>

    <tr>
      <td style="background-color: rgb(153, 153, 153); vertical-align: middle; text-align: center;">
      <div align="right"> 
      <small><small><a href="index.html">Index Page</a></small></small>
      </div>
      <b>dasadc</b></td>
    </tr>
    

    <tr>
      <td style="vertical-align: top;">

       <br>
       <div align="left"><b>Table of contents</b></div>
       <table style="text-align: left; width: 60%; margin-left: auto; margin-right: auto;"
       border="0" cellspacing="2" cellpadding="2">
        <tbody>
          <tr>
            <td style="width: 33%; text-align: center;">
              <a href="#Procedure">Procedure<br></a>
              <a href="#Abstract">Abstract<br></a>
              <a href="#Required_Reading">Required_Reading<br></a>
              <a href="#Keywords">Keywords<br></a>
              <a href="#Declarations">Declarations<br></a>
              <a href="#Brief_I/O">Brief_I/O<br></a>

              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">              <a href="#Detailed_Input">Detailed_Input<br></a>
              <a href="#Detailed_Output">Detailed_Output<br></a>
              <a href="#Parameters">Parameters<br></a>
              <a href="#Exceptions">Exceptions<br></a>
              <a href="#Files">Files<br></a>
              <a href="#Particulars">Particulars<br></a>

              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">              <big><b><a href="#Examples">Examples<br></a></b></big>
              <a href="#Restrictions">Restrictions<br></a>
              <a href="#Literature_References">Literature_References<br></a>
              <a href="#Author_and_Institution">Author_and_Institution<br></a>
              <a href="#Version">Version<br></a>
            </td>
          </tr>
        </tbody>
</table>
<hr>

<h4><a name="Procedure">Procedure</a></h4>
<PRE>
     DASADC ( DAS, add data, character )

     SUBROUTINE DASADC ( HANDLE, N, BPOS, EPOS, DATA )
</PRE>
<h4><a name="Abstract">Abstract</a></h4>
<PRE>
     Add character data to a DAS file.
</PRE>
<h4><a name="Required_Reading">Required_Reading</a></h4>
<PRE>
     <a href="../req/das.html">DAS</a>
</PRE>
<h4><a name="Keywords">Keywords</a></h4>
<PRE>
     ARRAY
     ASSIGNMENT
     DAS
     FILES
</PRE>
<h4><a name="Declarations">Declarations</a></h4>
<PRE>
     IMPLICIT NONE

     INTEGER               HANDLE
     INTEGER               N
     INTEGER               BPOS
     INTEGER               EPOS
     CHARACTER*(*)         DATA   ( * )
</PRE>
<h4><a name="Brief_I/O">Brief_I/O</a></h4>
<PRE>
     VARIABLE  I/O  DESCRIPTION
     --------  ---  --------------------------------------------------
     HANDLE     I   DAS file handle.
     N          I   Number of characters to add to file.
     BPOS,
     EPOS       I   Begin and end positions of substrings.
     DATA       I   Array providing the set of substrings to be added
                    to the character data in the DAS file.
</PRE>
<h4><a name="Detailed_Input">Detailed_Input</a></h4>
<PRE>
     HANDLE   is a file handle of a DAS file opened for writing.

     N        is the total number of characters to add to the specified
              DAS file.

     BPOS,
     EPOS     are the begin and end character positions that define the
              substrings in each of the elements of the input array.
              This routine writes the first N characters from the
              specified set of substrings to the specified DAS file.

     DATA     is an array of strings, some portion of whose contents
              are to be added to the specified DAS file. Specifically,
              the first N characters of the substrings

                 DATA(I)(BPOS:EPOS),    I = 1, ...

              are appended to the character data in the file.

              DATA must be declared at least as

                 CHARACTER*(EPOS)      DATA   ( R )

              with the dimension R being at least

                 R = INT( ( N + SUBLEN - 1 ) / SUBLEN )

              and SUBLEN, the length of each of the substrings in
              the array to be added to the DAS file, being

                 SUBLEN  =  EPOS - BPOS + 1

              The order of characters in the input substrings is
              considered to increase from left to right within each
              element of DATA, and to increase with the indices of the
              elements of DATA.
</PRE>
<h4><a name="Detailed_Output">Detailed_Output</a></h4>
<PRE>
     None.

     See $Particulars for a description of the effect of this routine.
</PRE>
<h4><a name="Parameters">Parameters</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Exceptions">Exceptions</a></h4>
<PRE>
     1)  If the input file handle is invalid, an error is signaled
         by a routine in the call tree of this routine.

     2)  If EPOS or BPOS are outside of the range

            [  1,  LEN( DATA(1) )  ]

         or if EPOS &lt; BPOS, the error SPICE(BADSUBSTRINGBOUNDS) is
         signaled.

     3)  If the input count N is less than 1, no data will be
         added to the specified DAS file.

     4)  If an I/O error occurs during the data addition attempted
         by this routine, the error is signaled by a routine in the
         call tree of this routine.

     5)  If N is greater than the number of characters in the
         specified set of input substrings, the results of calling
         this routine are unpredictable. This routine cannot
         detect this error.
</PRE>
<h4><a name="Files">Files</a></h4>
<PRE>
     See the description of the argument HANDLE in $Detailed_Input.
</PRE>
<h4><a name="Particulars">Particulars</a></h4>
<PRE>
     DAS is a low-level format meant to store and transmit data. As
     such, character data in DAS files are not interpreted by SPICELIB
     DAS input or output routines. There are no limits on which
     character values may be placed in the virtual character array of a
     DAS file.

     This routine adds character data to a DAS file by &quot;appending&quot; them
     after any character data already in the file. The sense in which
     the data are &quot;appended&quot; is that the data will occupy a range of
     logical addresses for character data that immediately follow the
     last logical address of a character that is occupied at the time
     this routine is called. The diagram below illustrates this
     addition:

        +-------------------------+
        |    (already in use)     |  Character logical address 1
        +-------------------------+
                    .
                    .
                    .
        +-------------------------+  Last character logical address
        |   (already in use)      |  in use before call to <b>DASADC</b>
        +-------------------------+
        |  DATA(1)(BPOS:BPOS)     |  First added character
        +-------------------------+
        |  DATA(1)(BPOS+1:BPOS+1) |
        +-------------------------+
                     .
                     .
                     .
        +-------------------------+
        |  DATA(1)(EPOS:EPOS)     |
        +-------------------------+
        |  DATA(2)(BPOS:BPOS)     |
        +-------------------------+
                     .
                     .
                     .
        +-------------------------+
        |  DATA(R)(C:C)           |  N'th added character---here R is
        +-------------------------+
                                        INT( (N+L-1)/L )

                                     where L = EPOS - BPOS + 1, and
                                     C is

                                        BPOS + ( N - (R-1)*L ) - 1


     The logical organization of the characters in the DAS file is
     independent of the order of addition to the file or physical
     location of any data of integer or double precision type.

     The actual physical write operations that add the input array
     DATA to the indicated DAS file may not take place before this
     routine returns, since the DAS system buffers data that are
     written as well as data that are read. In any case, the data
     will be flushed to the file at the time the file is closed, if
     not earlier. A physical write of all buffered records can be
     forced by calling the SPICELIB routine <a href="daswbr.html">DASWBR</a> (DAS, write
     buffered records).

     In order to update character logical addresses that already
     contain data, the SPICELIB routine <a href="dasudc.html">DASUDC</a> (DAS, update data,
     character) should be used.
</PRE>
<h4><a name="Examples">Examples</a></h4>
<PRE>
     The numerical results shown for this example may differ across
     platforms. The results depend on the SPICE kernels used as
     input, the compiler and supporting libraries, and the machine
     specific arithmetic implementation.

     1) The following example demonstrates the capabilities of the
        DAS character data routines. The reader should notice that
        in these interfaces, the character data are treated not as
        strings (or arrays of strings) but as a stream of single
        characters: DAS character data are not limited to
        human-readable text. For example, one can store images or
        DEM data as DAS character data.

        The example shows how to add a variable amount of character
        data to a new DAS file, how to update some of the character
        logical addresses within that file, and how to read that
        data out to a different array.


        Example code begins here.


              PROGRAM DASADC_EX1
              IMPLICIT NONE

        C
        C     Local parameters.
        C
              CHARACTER*(*)         FNAME
              PARAMETER           ( FNAME = 'dasadc_ex1.das' )

              CHARACTER*(*)         TYPE
              PARAMETER           ( TYPE  = 'TEST'           )

        C
        C     Local variables.
        C
              CHARACTER*(22)        CDATIN ( 3  )
              CHARACTER*(30)        CDATOU ( 10 )

              INTEGER               HANDLE
              INTEGER               I

              DATA CDATOU  / '..............................',
             .               '..............................',
             .               '..............................',
             .               '..............................',
             .               '..............................',
             .               '..............................',
             .               '..............................',
             .               '..............................',
             .               '         1         2         3',
             .               '123456789012345678901234567890' /

        C
        C     Open a new DAS file. Use the file name as the internal
        C     file name, and reserve no records for comments.
        C
              CALL DASONW ( FNAME, TYPE, FNAME, 0, HANDLE )

        C
        C     Set the input data. Note that these data will be
        C     considered as a binary data stream: DAS character data
        C     are not limited to human-readable text. For example,
        C     one can store images or DEM data as DAS character data.
        C
              CDATIN ( 1 ) = '--F-345678901234567890'
              CDATIN ( 2 ) = '--S-345678901234567890'
              CDATIN ( 3 ) = '--T-IRDxxxxxxxxxxxxxxx'

        C
        C     Add the last 20 characters of the first two elements
        C     of CDATIN, and the 3rd character from the third one.
        C
              CALL <b>DASADC</b> ( HANDLE, 41, 3, 22, CDATIN )

        C
        C     Update the 10th, 20th and 30th character in the DAS
        C     file with a vertical bar.
        C
              DO I = 1, 3

                 CALL <a href="dasudc.html">DASUDC</a> ( HANDLE, I*10, I*10, 1, 1, '|' )

              END DO

        C
        C     Close the file.
        C
              CALL <a href="dascls.html">DASCLS</a> ( HANDLE )

        C
        C     Now verify the addition of data by opening the
        C     file for read access and retrieving the data.
        C
              CALL DASOPR ( FNAME, HANDLE )

        C
        C     Read the 41 characters that we stored on the DAS
        C     file. Update the data on the CDATOU array, placing
        C     6 characters on each element, starting from the
        C     10th position.
        C
              CALL <a href="dasrdc.html">DASRDC</a> ( HANDLE, 1, 41, 10, 15, CDATOU )

        C
        C     Dump the data to the screen. Note that the last
        C     three lines should remain unmodified, and that
        C     only 5 characters will be written on the 7th line.
        C
              WRITE (*,*)
              WRITE (*,*) 'Data from &quot;', FNAME, '&quot;:'
              WRITE (*,*)

              DO I = 1, 10
                 WRITE (*,*) CDATOU(I)
              END DO

        C
        C     Close the file.
        C
              CALL <a href="dascls.html">DASCLS</a> ( HANDLE )

              END


        When this program was executed on a Mac/Intel/gfortran/64-bit
        platform, the output was:


         Data from &quot;dasadc_ex1.das&quot;:

         .........F-3456...............
         .........789|12...............
         .........345678...............
         .........9|S-34...............
         .........56789|...............
         .........123456...............
         .........7890T................
         ..............................
                  1         2         3
         123456789012345678901234567890


        Note that after run completion, a new DAS file exists in the
        output directory.
</PRE>
<h4><a name="Restrictions">Restrictions</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Literature_References">Literature_References</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Author_and_Institution">Author_and_Institution</a></h4>
<PRE>
     N.J. Bachman       (JPL)
     J. Diaz del Rio    (ODC Space)
     K.R. Gehringer     (JPL)
     W.L. Taber         (JPL)
</PRE>
<h4><a name="Version">Version</a></h4>
<PRE>
    SPICELIB Version 1.3.0, 08-OCT-2021 (JDR) (NJB)

        Added IMPLICIT NONE statement. Updated the code to avoid that
        <a href="dascud.html">DASCUD</a> is called with a negative number of character words
        when the input count N is negative.

        Made local variable RECORD a saved variable which is
        initialized by a DATA statement.

        Bug fix: added <a href="failed.html">FAILED</a> call after DASHFS call.

        Edited the header to comply with NAIF standard.

        Replaced example code with one that demonstrates the usage and
        effect of all DAS character data routines.

        Updated entries in the $Revisions section.

    SPICELIB Version 1.2.0, 10-APR-2014 (NJB)

        Deleted declarations of unused parameters.

        Corrected header comments: routine that flushes
        written, buffered records is <a href="daswbr.html">DASWBR</a>, not DASWUR.

    SPICELIB Version 1.1.1, 19-DEC-1995 (NJB)

        Corrected title of permuted index entry section.

    SPICELIB Version 1.1.0, 12-MAY-1994 (KRG) (NJB)

        Test of <a href="failed.html">FAILED</a>() added to loop termination condition.

        Removed references to specific DAS file open routines in the
        $Detailed_Input section of the header. This was done in order
        to minimize documentation changes if the DAS open routines ever
        change.

        Modified the $Examples section to demonstrate the new ID word
        format which includes a file type and to include a call to the
        new routine DASONW, open new, which makes use of the file
        type. Also, a variable for the type of the file to be created
        was added.

    SPICELIB Version 1.0.0, 11-NOV-1992 (NJB) (WLT)</PRE>
<h4>Link to routine DASADC source file <a href='../../../src/spicelib/dasadc.f'>dasadc.f</a> </h4>

      </td>
    </tr>
  </tbody>
</table>

   <pre>Fri Dec 31 18:36:10 2021</pre>

</body>
</html>

