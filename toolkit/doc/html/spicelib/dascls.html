
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>

<HEAD>
   <TITLE>dascls</TITLE>
</HEAD>

<BODY style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<A name="TOP"></A>

<table style="text-align: left; margin-left: auto; margin-right: auto; width: 800px;"
 border="0" cellpadding="5" cellspacing="2">
  <tbody>
    <tr><td>
<div align="center">
Index of Functions: 
<A HREF="index.html#A">A</A>&nbsp;
<A HREF="index.html#B">B</A>&nbsp;
<A HREF="index.html#C">C</A>&nbsp;
<A HREF="index.html#D">D</A>&nbsp;
<A HREF="index.html#E">E</A>&nbsp;
<A HREF="index.html#F">F</A>&nbsp;
<A HREF="index.html#G">G</A>&nbsp;
<A HREF="index.html#H">H</A>&nbsp;
<A HREF="index.html#I">I</A>&nbsp;
<A HREF="index.html#J">J</A>&nbsp;
<A HREF="index.html#K">K</A>&nbsp;
<A HREF="index.html#L">L</A>&nbsp;
<A HREF="index.html#M">M</A>&nbsp;
<A HREF="index.html#N">N</A>&nbsp;
<A HREF="index.html#O">O</A>&nbsp;
<A HREF="index.html#P">P</A>&nbsp;
<A HREF="index.html#Q">Q</A>&nbsp;
<A HREF="index.html#R">R</A>&nbsp;
<A HREF="index.html#S">S</A>&nbsp;
<A HREF="index.html#T">T</A>&nbsp;
<A HREF="index.html#U">U</A>&nbsp;
<A HREF="index.html#V">V</A>&nbsp;
<A HREF="index.html#W">W</A>&nbsp;
<A HREF="index.html#X">X</A>&nbsp;
</div>
</td></tr>

    <tr>
      <td style="background-color: rgb(153, 153, 153); vertical-align: middle; text-align: center;">
      <div align="right"> 
      <small><small><a href="index.html">Index Page</a></small></small>
      </div>
      <b>dascls</b></td>
    </tr>
    

    <tr>
      <td style="vertical-align: top;">

       <br>
       <div align="left"><b>Table of contents</b></div>
       <table style="text-align: left; width: 60%; margin-left: auto; margin-right: auto;"
       border="0" cellspacing="2" cellpadding="2">
        <tbody>
          <tr>
            <td style="width: 33%; text-align: center;">
              <a href="#Procedure">Procedure<br></a>
              <a href="#Abstract">Abstract<br></a>
              <a href="#Required_Reading">Required_Reading<br></a>
              <a href="#Keywords">Keywords<br></a>
              <a href="#Declarations">Declarations<br></a>
              <a href="#Brief_I/O">Brief_I/O<br></a>

              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">              <a href="#Detailed_Input">Detailed_Input<br></a>
              <a href="#Detailed_Output">Detailed_Output<br></a>
              <a href="#Parameters">Parameters<br></a>
              <a href="#Exceptions">Exceptions<br></a>
              <a href="#Files">Files<br></a>
              <a href="#Particulars">Particulars<br></a>

              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">              <big><b><a href="#Examples">Examples<br></a></b></big>
              <a href="#Restrictions">Restrictions<br></a>
              <a href="#Literature_References">Literature_References<br></a>
              <a href="#Author_and_Institution">Author_and_Institution<br></a>
              <a href="#Version">Version<br></a>
            </td>
          </tr>
        </tbody>
</table>
<hr>

<h4><a name="Procedure">Procedure</a></h4>
<PRE>
     DASCLS ( DAS, close file )

     SUBROUTINE DASCLS ( HANDLE )
</PRE>
<h4><a name="Abstract">Abstract</a></h4>
<PRE>
     Close a DAS file.
</PRE>
<h4><a name="Required_Reading">Required_Reading</a></h4>
<PRE>
     <a href="../req/das.html">DAS</a>
</PRE>
<h4><a name="Keywords">Keywords</a></h4>
<PRE>
     DAS
     FILES
</PRE>
<h4><a name="Declarations">Declarations</a></h4>
<PRE>
     IMPLICIT NONE

     INCLUDE 'das.inc'

     INTEGER               HANDLE
</PRE>
<h4><a name="Brief_I/O">Brief_I/O</a></h4>
<PRE>
     VARIABLE  I/O  DESCRIPTION
     --------  ---  --------------------------------------------------
     HANDLE     I   Handle of an open DAS file.
     FTSIZE     P   Maximum number of simultaneously open DAS files.
</PRE>
<h4><a name="Detailed_Input">Detailed_Input</a></h4>
<PRE>
     HANDLE   is the file handle of an open DAS file.
</PRE>
<h4><a name="Detailed_Output">Detailed_Output</a></h4>
<PRE>
     None.

     See $Particulars for a description of the effect of this routine.
</PRE>
<h4><a name="Parameters">Parameters</a></h4>
<PRE>
     All parameters described here are declared in the SPICELIB
     include file das.inc. See that file for parameter values.

     FTSIZE   is the maximum number of DAS files that can be
              open at any one time.
</PRE>
<h4><a name="Exceptions">Exceptions</a></h4>
<PRE>
     Error free.

     1)  If HANDLE is not the handle of an open DAS file, no error
         is signaled.
</PRE>
<h4><a name="Files">Files</a></h4>
<PRE>
     See the description of input argument HANDLE in $Detailed_Input.
</PRE>
<h4><a name="Particulars">Particulars</a></h4>
<PRE>
     This routine provides the primary recommended method of closing an
     open DAS file. It is also possible to close a DAS file without
     segregating it by calling <a href="daswbr.html">DASWBR</a> and DASLLC. Closing a DAS file by
     any other means may cause the DAS mechanism for keeping track of
     which files are open to fail. Closing a DAS file that has been
     opened for writing by any other means may result in the production
     of something other than a DAS file.
</PRE>
<h4><a name="Examples">Examples</a></h4>
<PRE>
     The numerical results shown for these examples may differ across
     platforms. The results depend on the SPICE kernels used as
     input, the compiler and supporting libraries, and the machine
     specific arithmetic implementation.

     1) Open a new DAS file called TEST.DAS, add 100 d.p. numbers
        to it, and then close the file.

        Example code begins here.


              PROGRAM DASCLS_EX1
              IMPLICIT NONE

              INTEGER               NMAX
              PARAMETER           ( NMAX   = 100 )

              CHARACTER*(15)        FNAME
              CHARACTER*(5)         FTYPE
              CHARACTER*(15)        IFNAME

              DOUBLE PRECISION      DDATA  ( NMAX )

              INTEGER               HANDLE
              INTEGER               I
              INTEGER               N
              INTEGER               NCOMCH

        C
        C     We'll give the file the same internal file name
        C     as the file's actual name.  We don't require any
        C     comment records.
        C
              FNAME  = 'dascls_ex1.das'
              FTYPE  = 'TEST'
              IFNAME = FNAME
              NCOMCH = 0

              WRITE(*,*) 'Opening the DAS file for writing...'
              CALL DASONW ( FNAME, FTYPE,  FNAME, NCOMCH, HANDLE )

              DO I = 1, NMAX
                 DDATA(I)  =  DBLE(I)
              END DO

              N = NMAX

              WRITE(*,*) 'Adding the double precision numbers...'
              CALL <a href="dasadd.html">DASADD</a> ( HANDLE, N, DDATA )

              WRITE(*,*) 'Closing the DAS file...'
              CALL <b>DASCLS</b> ( HANDLE )

              WRITE(*,*) 'All ok.'

              END


        When this program was executed on a Mac/Intel/gfortran/64-bit
        platform, the output was:


         Opening the DAS file for writing...
         Adding the double precision numbers...
         Closing the DAS file...
         All ok.


        Note that after run completion, a new DAS file exists in
        the output directory.


     2) Dump several parameters from the first DLA segment of a DSK
        file. Note that DSK files are based on DAS. The segment is
        assumed to be of type 2.


        Example code begins here.


              PROGRAM DASCLS_EX2
              IMPLICIT NONE

              INCLUDE 'dla.inc'
              INCLUDE 'dskdsc.inc'
              INCLUDE 'dsk02.inc'

        C
        C     Local parameters
        C
              INTEGER               FILSIZ
              PARAMETER           ( FILSIZ = 255 )

              INTEGER               LNSIZE
              PARAMETER           ( LNSIZE = 80 )

        C
        C     Local variables
        C
              CHARACTER*(FILSIZ)    DSK
              CHARACTER*(LNSIZE)    OUTLIN

              DOUBLE PRECISION      VOXORI ( 3 )
              DOUBLE PRECISION      VOXSIZ
              DOUBLE PRECISION      VTXBDS ( 2, 3 )

              INTEGER               CGSCAL
              INTEGER               DLADSC ( DLADSZ )
              INTEGER               HANDLE
              INTEGER               NP
              INTEGER               NV
              INTEGER               NVXTOT
              INTEGER               VGREXT ( 3 )
              INTEGER               VOXNPL
              INTEGER               VOXNPT
              INTEGER               VTXNPL

              LOGICAL               FOUND


        C
        C     Prompt for the name of the DSK to read.
        C
              CALL PROMPT ( 'Enter DSK name &gt; ', DSK )
        C
        C     Open the DSK file for read access.
        C     We use the DAS-level interface for
        C     this function.
        C
              CALL DASOPR ( DSK, HANDLE )

        C
        C     Begin a forward search through the
        C     kernel, treating the file as a DLA.
        C     In this example, it's a very short
        C     search.
        C
              CALL <a href="dlabfs.html">DLABFS</a> ( HANDLE, DLADSC, FOUND )

              IF ( .NOT. FOUND ) THEN
        C
        C        We arrive here only if the kernel
        C        contains no segments.  This is
        C        unexpected, but we're prepared for it.
        C
                 CALL <a href="setmsg.html">SETMSG</a> ( 'No segments found '
             .   //            'in DSK file #.'    )
                 CALL <a href="errch.html">ERRCH</a>  ( '#',  DSK           )
                 CALL <a href="sigerr.html">SIGERR</a> ( 'SPICE(NODATA)'     )

              END IF

        C
        C     If we made it this far, DLADSC is the
        C     DLA descriptor of the first segment.
        C
        C     Read and display type 2 bookkeeping data.
        C
              CALL <a href="dskb02.html">DSKB02</a> ( HANDLE, DLADSC, NV,     NP,     NVXTOT,
             .              VTXBDS, VOXSIZ, VOXORI, VGREXT, CGSCAL,
             .              VTXNPL, VOXNPT, VOXNPL                 )

        C
        C     Show vertex and plate counts.
        C
              OUTLIN = 'Number of vertices:                 #'
              CALL <a href="repmi.html">REPMI</a>  ( OUTLIN, '#', NV, OUTLIN )
              CALL <a href="tostdo.html">TOSTDO</a> ( OUTLIN )

              OUTLIN = 'Number of plates:                   #'
              CALL <a href="repmi.html">REPMI</a>  ( OUTLIN, '#', NP, OUTLIN )
              CALL <a href="tostdo.html">TOSTDO</a> ( OUTLIN )

              OUTLIN = 'Voxel edge length (km):             #'
              CALL <a href="repmf.html">REPMF</a>  ( OUTLIN, '#', VOXSIZ, 6, 'E', OUTLIN )
              CALL <a href="tostdo.html">TOSTDO</a> ( OUTLIN )

              OUTLIN = 'Number of voxels:                   #'
              CALL <a href="repmi.html">REPMI</a>  ( OUTLIN, '#', NVXTOT, OUTLIN )
              CALL <a href="tostdo.html">TOSTDO</a> ( OUTLIN )

        C
        C     Close the kernel.  This isn't necessary in a stand-
        C     alone program, but it's good practice in subroutines
        C     because it frees program and system resources.
        C
              CALL <b>DASCLS</b> ( HANDLE )

              END


        When this program was executed on a Mac/Intel/gfortran/64-bit
        platform, using the DSK file named phobos512.bds, the output
        was:


        Enter DSK name &gt; phobos512.bds
        Number of vertices:                 1579014
        Number of plates:                   3145728
        Voxel edge length (km):             1.04248E-01
        Number of voxels:                   11914500
</PRE>
<h4><a name="Restrictions">Restrictions</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Literature_References">Literature_References</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Author_and_Institution">Author_and_Institution</a></h4>
<PRE>
     N.J. Bachman       (JPL)
     J. Diaz del Rio    (ODC Space)
     K.R. Gehringer     (JPL)
     W.L. Taber         (JPL)
</PRE>
<h4><a name="Version">Version</a></h4>
<PRE>
    SPICELIB Version 2.1.0, 12-OCT-2021 (JDR) (NJB)

        Bug fix: added call to <a href="failed.html">FAILED</a> following call to DASHAM.

        Added IMPLICIT NONE statement.

        Edited the header to comply with NAIF standard. Created
        complete code example #1 from existing code fragment
        and added code example #2 using example from <a href="dskb02.html">DSKB02</a>.

        Updated entries in the $Revisions section.

    SPICELIB Version 2.0.0, 10-FEB-2017 (NJB)

        Updated to use DAF/DAS handle manager subsystem.

    SPICELIB Version 1.3.3, 05-OCT-2006 (NJB)

        Corrected <a href="dasadd.html">DASADD</a> calling sequence error in code example.
        Updated $Particulars header section to mention closing DAS
        files without segregation via calls to <a href="daswbr.html">DASWBR</a> and DASLLC.

    SPICELIB Version 1.3.2, 24-MAR-2003 (NJB)

        <a href="daswbr.html">DASWBR</a> call has been reinstated for scratch DAS case.
        This call has the side effect of freeing buffer records
        owned by the file <a href="daswbr.html">DASWBR</a> writes to. Failing to free these
        records can cause write errors on HP/Fortran systems.

    SPICELIB Version 1.2.2, 27-FEB-2003 (NJB)

        Tests whether file to be closed is a scratch DAS; if
        so, buffer flushes and record segregation are omitted.

    SPICELIB Version 1.1.1, 26-OCT-1993 (KRG)

        Removed references to specific DAS file open routines in the
        $Detailed_Input section of the header. This was done in order
        to minimize documentation changes if these open routines ever
        change.

        Modified the $Examples section to demonstrate the new ID word
        format which includes a file type and to include a call to the
        new routine DASONW, open new for write, which makes use of the
        file type. Also,  a variable for the type of the file to be
        created was added.

        Changed the value of the parameter FTSIZE from 20 to 21. This
        change makes the value of FTSIZE in <b>DASCLS</b> compatible with the
        value in DASFM. See DASFM for a discussion of the reasons for
        the increase in the value.

    SPICELIB Version 1.1.0, 08-JUL-1993 (NJB)

        FHSET is now saved.

    SPICELIB Version 1.0.0, 30-JUN-1992 (NJB) (WLT)</PRE>
<h4>Link to routine DASCLS source file <a href='../../../src/spicelib/dascls.f'>dascls.f</a> </h4>

      </td>
    </tr>
  </tbody>
</table>

   <pre>Fri Dec 31 18:36:10 2021</pre>

</body>
</html>

