
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>

<HEAD>
   <TITLE>dafac</TITLE>
</HEAD>

<BODY style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<A name="TOP"></A>

<table style="text-align: left; margin-left: auto; margin-right: auto; width: 800px;"
 border="0" cellpadding="5" cellspacing="2">
  <tbody>
    <tr><td>
<div align="center">
Index of Functions: 
<A HREF="index.html#A">A</A>&nbsp;
<A HREF="index.html#B">B</A>&nbsp;
<A HREF="index.html#C">C</A>&nbsp;
<A HREF="index.html#D">D</A>&nbsp;
<A HREF="index.html#E">E</A>&nbsp;
<A HREF="index.html#F">F</A>&nbsp;
<A HREF="index.html#G">G</A>&nbsp;
<A HREF="index.html#H">H</A>&nbsp;
<A HREF="index.html#I">I</A>&nbsp;
<A HREF="index.html#J">J</A>&nbsp;
<A HREF="index.html#K">K</A>&nbsp;
<A HREF="index.html#L">L</A>&nbsp;
<A HREF="index.html#M">M</A>&nbsp;
<A HREF="index.html#N">N</A>&nbsp;
<A HREF="index.html#O">O</A>&nbsp;
<A HREF="index.html#P">P</A>&nbsp;
<A HREF="index.html#Q">Q</A>&nbsp;
<A HREF="index.html#R">R</A>&nbsp;
<A HREF="index.html#S">S</A>&nbsp;
<A HREF="index.html#T">T</A>&nbsp;
<A HREF="index.html#U">U</A>&nbsp;
<A HREF="index.html#V">V</A>&nbsp;
<A HREF="index.html#W">W</A>&nbsp;
<A HREF="index.html#X">X</A>&nbsp;
</div>
</td></tr>

    <tr>
      <td style="background-color: rgb(153, 153, 153); vertical-align: middle; text-align: center;">
      <div align="right"> 
      <small><small><a href="index.html">Index Page</a></small></small>
      </div>
      <b>dafac</b></td>
    </tr>
    

    <tr>
      <td style="vertical-align: top;">

       <br>
       <div align="left"><b>Table of contents</b></div>
       <table style="text-align: left; width: 60%; margin-left: auto; margin-right: auto;"
       border="0" cellspacing="2" cellpadding="2">
        <tbody>
          <tr>
            <td style="width: 33%; text-align: center;">
              <a href="#Procedure">Procedure<br></a>
              <a href="#Abstract">Abstract<br></a>
              <a href="#Required_Reading">Required_Reading<br></a>
              <a href="#Keywords">Keywords<br></a>
              <a href="#Declarations">Declarations<br></a>
              <a href="#Brief_I/O">Brief_I/O<br></a>

              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">              <a href="#Detailed_Input">Detailed_Input<br></a>
              <a href="#Detailed_Output">Detailed_Output<br></a>
              <a href="#Parameters">Parameters<br></a>
              <a href="#Exceptions">Exceptions<br></a>
              <a href="#Files">Files<br></a>
              <a href="#Particulars">Particulars<br></a>

              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">              <big><b><a href="#Examples">Examples<br></a></b></big>
              <a href="#Restrictions">Restrictions<br></a>
              <a href="#Literature_References">Literature_References<br></a>
              <a href="#Author_and_Institution">Author_and_Institution<br></a>
              <a href="#Version">Version<br></a>
            </td>
          </tr>
        </tbody>
</table>
<hr>

<h4><a name="Procedure">Procedure</a></h4>
<PRE>
     DAFAC ( DAF add comments )

     SUBROUTINE DAFAC ( HANDLE, N, BUFFER )
</PRE>
<h4><a name="Abstract">Abstract</a></h4>
<PRE>
     Add comments from a buffer of character strings to the comment
     area of a binary DAF file, appending them to any comments which
     are already present in the file's comment area.
</PRE>
<h4><a name="Required_Reading">Required_Reading</a></h4>
<PRE>
     <a href="../req/daf.html">DAF</a>
</PRE>
<h4><a name="Keywords">Keywords</a></h4>
<PRE>
     FILES
     UTILITY
</PRE>
<h4><a name="Declarations">Declarations</a></h4>
<PRE>
     IMPLICIT NONE

     INTEGER               HANDLE
     INTEGER               N
     CHARACTER*(*)         BUFFER(*)
</PRE>
<h4><a name="Brief_I/O">Brief_I/O</a></h4>
<PRE>
     VARIABLE  I/O  DESCRIPTION
     --------  ---  --------------------------------------------------
     HANDLE     I   Handle of a DAF opened with write access.
     N          I   Number of comments to put into the comment area.
     BUFFER     I   Buffer of comments to put into the comment area.
</PRE>
<h4><a name="Detailed_Input">Detailed_Input</a></h4>
<PRE>
     HANDLE   is the file handle of a binary DAF which has been opened
              with write access.

     N        is the number of comments in BUFFER that are to be added
              to the comment area of the binary DAF attached to HANDLE.

     BUFFER   is a buffer containing comments which are to be added
              to the comment area of the binary DAF attached to HANDLE.
</PRE>
<h4><a name="Detailed_Output">Detailed_Output</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Parameters">Parameters</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Exceptions">Exceptions</a></h4>
<PRE>
     1)  If the number of comments to be added is not positive, the
         error SPICE(INVALIDARGUMENT) is signaled.

     2)  If a non printing ASCII character is encountered in the
         comments, the error SPICE(ILLEGALCHARACTER) is signaled.

     3)  If the binary DAF file attached to HANDLE is not open with
         write access, an error is signaled by a routine in the call
         tree of this routine.

     4)  If the end of the comments cannot be found, i.e., the end of
         comments marker is missing on the last comment record, the
         error SPICE(BADCOMMENTAREA) is signaled.
</PRE>
<h4><a name="Files">Files</a></h4>
<PRE>
     See argument HANDLE in $Detailed_Input.
</PRE>
<h4><a name="Particulars">Particulars</a></h4>
<PRE>
     A binary DAF contains a data area which is reserved for storing
     annotations or descriptive textual information about the data
     contained in a file. This area is referred to as the ``comment
     area'' of the file. The comment area of a DAF is a line oriented
     medium for storing textual information. The comment area
     preserves leading or embedded white space in the line(s) of text
     which are stored so that the appearance of the information will
     be unchanged when it is retrieved (extracted) at some other time.
     Trailing blanks, however, are NOT preserved, due to the way that
     character strings are represented in standard Fortran 77.

     This routine will take a buffer of text lines and add (append)
     them to the comment area of a binary DAF. If there are no
     comments in the comment area of the file, then space will be
     allocated and the text lines in BUFFER will be placed into the
     comment area. The text lines may contain only printable ASCII
     characters (decimal values 32 - 126).

     There is NO maximum length imposed on the significant portion
     of a text line that may be placed into the comment area of a
     DAF. The maximum length of a line stored in the comment area
     should be reasonable, however, so that they may be easily
     extracted. A good maximum value for this would be 255 characters,
     as this can easily accommodate ``screen width'' lines as well as
     long lines which may contain some other form of information.
</PRE>
<h4><a name="Examples">Examples</a></h4>
<PRE>
     The numerical results shown for this example may differ across
     platforms. The results depend on the SPICE kernels used as
     input, the compiler and supporting libraries, and the machine
     specific arithmetic implementation.

     1) This example demonstrates how to append new comments to the
        comment area of a DAF file.

        Use the SPK kernel below as input DAF file for the program.

           earthstns_itrf93_201023.bsp


        Example code begins here.


              PROGRAM DAFAC_EX1
              IMPLICIT NONE

        C
        C     SPICELIB functions
        C
              INTEGER               <a href="rtrim.html">RTRIM</a>

        C
        C     Local parameters
        C
              CHARACTER*(*)         KERNEL
              PARAMETER           ( KERNEL =
             .                         'earthstns_itrf93_201023.bsp' )

              INTEGER               BUFSIZ
              PARAMETER           ( BUFSIZ = 25 )

              INTEGER               CMTSIZ
              PARAMETER           ( CMTSIZ = 7  )

              INTEGER               LINLEN
              PARAMETER           ( LINLEN = 1000 )

        C
        C     Local variables.
        C
              CHARACTER*(LINLEN)    BUFFER ( BUFSIZ )
              CHARACTER*(LINLEN)    NEWCMT ( CMTSIZ )

              INTEGER               HANDLE
              INTEGER               I
              INTEGER               N

              LOGICAL               DONE

        C
        C     Set the new comments to be added to the DAF file.
        C
              DATA                  NEWCMT /
             .  '================== NEW COMMENTS ==================',
             .  '',
             .  '   New comments can be appended to the end of the',
             .  '   comment area of a DAF file, with a single',
             .  '   operation.',
             .  '',
             .  '================ END NEW COMMENTS ================' /


        C
        C     Open a DAF for write. Return a HANDLE referring to the
        C     file.
        C
              CALL <a href="dafopw.html">DAFOPW</a> ( KERNEL, HANDLE )

        C
        C     Print the end of comment area from the DAF file.
        C     (Maximum 15 lines.)
        C
              DONE = .FALSE.

              DO WHILE ( .NOT. DONE )

                 CALL <a href="dafec.html">DAFEC</a>  ( HANDLE, 15, N, BUFFER, DONE )

                 IF ( DONE ) THEN

                    WRITE(*,'(A)') 'End of comment area of input '
             .                  // 'DAF file (max. 15 lines): '
                    WRITE(*,'(A)') '-------------------------------'
             .                  // '-------------------------------'

                    DO I = 1, N

                       WRITE (*,*) BUFFER(I)(:<a href="rtrim.html">RTRIM</a>(BUFFER(I)))

                    END DO

                    WRITE(*,'(A)') '-------------------------------'
             .                  // '-------------------------------'

                 END IF

              END DO

        C
        C     Append the new comments to the DAF file.
        C
              CALL <b>DAFAC</b> ( HANDLE, CMTSIZ, NEWCMT )

        C
        C     Safely close the DAF.
        C
              CALL <a href="dafcls.html">DAFCLS</a> ( HANDLE )

        C
        C     Check if the comments have indeed appended.
        C
        C     Open a DAF for read.
        C
              CALL <a href="dafopr.html">DAFOPR</a> ( KERNEL, HANDLE )
              DONE = .FALSE.

              DO WHILE ( .NOT. DONE )

                 CALL <a href="dafec.html">DAFEC</a>  ( HANDLE, BUFSIZ, N, BUFFER, DONE )

                 IF ( DONE ) THEN

                    WRITE(*,'(A)') 'End of comment area of input '
             .                  // 'DAF file (max. 25 lines): '
                    WRITE(*,'(A)') '-------------------------------'
             .                  // '-------------------------------'

                    DO I = 1, N

                       WRITE (*,*) BUFFER(I)(:<a href="rtrim.html">RTRIM</a>(BUFFER(I)))

                    END DO

                    WRITE(*,'(A)') '-------------------------------'
             .                  // '-------------------------------'

                 END IF

              END DO

        C
        C     Safely close the DAF.
        C
              CALL <a href="dafcls.html">DAFCLS</a> ( HANDLE )

              END


        When this program was executed on a Mac/Intel/gfortran/64-bit
        platform, the output was:


        End of comment area of input DAF file (max. 15 lines):
        --------------------------------------------------------------
            DSS-65_DXYZ       =    (    -0.0100          0.0242     ***
            DSS-65_TOPO_EPOCH =       @2020-OCT-23/00:00
            DSS-65_UP         =       'Z'
            DSS-65_NORTH      =       'X'

         \begintext
        --------------------------------------------------------------
        End of comment area of input DAF file (max. 25 lines):
        --------------------------------------------------------------
            DSS-65_DXYZ       =    (    -0.0100          0.0242     ***
            DSS-65_TOPO_EPOCH =       @2020-OCT-23/00:00
            DSS-65_UP         =       'Z'
            DSS-65_NORTH      =       'X'

         \begintext
         ================== NEW COMMENTS ==================

            New comments can be appended to the end of the
            comment area of a DAF file, with a single
            operation.

         ================ END NEW COMMENTS ================
        --------------------------------------------------------------


        Warning: incomplete output. 2 lines extended past the right
        margin of the header and have been truncated. These lines are
        marked by &quot;***&quot; at the end of each line.
</PRE>
<h4><a name="Restrictions">Restrictions</a></h4>
<PRE>
     1)  This routine uses constants that are specific to the ASCII
         character sequence. The results of using this routine with
         a different character sequence are unpredictable.

     2)  This routine is only used to extract records on environments
         whose characters are a single byte in size. Updates to this
         routine and routines in its call tree may be required to
         properly handle other cases.
</PRE>
<h4><a name="Literature_References">Literature_References</a></h4>
<PRE>
     None.
</PRE>
<h4><a name="Author_and_Institution">Author_and_Institution</a></h4>
<PRE>
     J. Diaz del Rio    (ODC Space)
     K.R. Gehringer     (JPL)
     F.S. Turner        (JPL)
</PRE>
<h4><a name="Version">Version</a></h4>
<PRE>
    SPICELIB Version 2.1.0, 25-NOV-2021 (JDR)

        Added IMPLICIT NONE statement.

        Edited the header to comply with NAIF standard.
        Added complete code examples from existing code fragments.

    SPICELIB Version 2.0.0, 16-NOV-2001 (FST)

        Updated this routine to utilize the new handle manager
        interfaces.

    SPICELIB Version 1.0.0, 26-JUL-1994 (KRG)</PRE>
<h4>Link to routine DAFAC source file <a href='../../../src/spicelib/dafac.f'>dafac.f</a> </h4>

      </td>
    </tr>
  </tbody>
</table>

   <pre>Fri Dec 31 18:36:06 2021</pre>

</body>
</html>

